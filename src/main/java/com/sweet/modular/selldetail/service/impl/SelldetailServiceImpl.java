package com.sweet.modular.selldetail.service.impl;import com.sweet.core.util.RedisUtil;import com.sweet.modular.selldetail.entity.Selldetail;import com.sweet.modular.selldetail.mapper.SelldetailMapper;import com.sweet.modular.selldetail.service.SelldetailService;import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;import com.sweet.modular.selldetailTech.entity.DetailTech;import com.sweet.modular.selldetailTech.service.DetailTechService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import com.baomidou.mybatisplus.core.metadata.IPage;import com.baomidou.mybatisplus.extension.plugins.pagination.Page;import com.sweet.core.model.system.LayuiPageFactory;import com.sweet.core.model.system.LayuiPageInfo;import java.util.List;/** * <p> * 销售详情 服务实现类 * </p> * * @author admin * @since 2020-04-30 */@Servicepublic class SelldetailServiceImpl extends ServiceImpl<SelldetailMapper, Selldetail> implements SelldetailService {    @Autowired    RedisUtil redisUtil;    @Autowired    DetailTechService detailTechService;    @Override    public LayuiPageInfo findPageBySpec(Selldetail selldetail) {        Page pageContext = LayuiPageFactory.defaultPage();        IPage page = this.baseMapper.customPageList(pageContext, selldetail);        return LayuiPageFactory.createPageInfo(page);    }    @Override    public List<Selldetail> findBySellId(Long sellId) {        String redisKey = "sell_detail:"+sellId;        List<Selldetail> list = (List<Selldetail>) redisUtil.get(redisKey);        if(list==null){            list = baseMapper.findBySellId(sellId);            redisUtil.set(redisKey,list);        }        for(Selldetail selldetail:list){            selldetail.setSelldetailTechList(detailTechService.query().eq("SELL_DETAIL_ID",selldetail.getId()).list());        }        return list;    }}