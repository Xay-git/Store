<!DOCTYPE html><!-- saved from url=(0042)http://v.bootstrapmb.com/2019/4/cdcuw4211/ --><html><head>    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    <title>通用大数据可视化展示平台模板</title>    <link rel="stylesheet" href="/plugin/element/index.css" media="all">    <script src="/plugin/layui/layui.all.js"></script>    <script src="/plugin/vue/vue.min.js"></script>    <script src="/plugin/vue/axios.min.js"></script>    <script src="/plugin/element/index.js"></script>    <script src="/plugin/vue/qs.min.js"></script>    <script src="/common/js/request.js?v=${version}"></script>    <script src="/common/js/common.js?v=${version}"></script>    <script src="/modular/js/api.js?v=${version}"></script>    <script type="text/javascript" src="/modular/fullscreen/jquery.js"></script>    <script type="text/javascript" src="/modular/fullscreen/echarts.min.js"></script>    <script type="text/javascript" src="/modular/fullscreen/china.js"></script>    <script type="text/javascript" src="/modular/fullscreen/js.js?v=${version}"></script>    <script type="text/javascript" src="/modular/fullscreen/jquery.cxselect.min.js"></script>    <link rel="stylesheet" href="/modular/fullscreen/comon0.css?v=${version}"></head><style>    .el-input__inner {        background: transparent;        width: 150px;        color:white;    }    .wp::-webkit-scrollbar {        display: none;    }    .alltitle:before{        width: 40%;    }</style><body><div class="canvas">    <iframe src="/admin/sell/canvas" frameborder="0" style="width: 100%; height: 100%"></iframe></div><div class="loading" style="display: none;">    <div class="loadbox"><img src="/modular/fullscreen/loading.gif">页面加载中...</div></div><div style="overflow: hidden;background:rgba(0,0,40,0) ; position: relative; z-index: 2;">    <div class="mainbox" id="app">        <ul class="clearfix">            <li>                <div class="boxall" style="height:350px">                    <div class="alltitle">服务项目销售排行(近七天)</div>                    <div class="navboxall wp" style="overflow: scroll;">                        <table class="table1" width="100%" border="0" cellspacing="0" cellpadding="0">                            <tbody>                            <tr>                                <th scope="col">排名</th>                                <th scope="col">名称</th>                                <th scope="col">金额</th>                                <th scope="col">销售量</th>                            </tr>                            <tr v-for="(item,index) in info.projectSortList">                                <td><span>{{index+1}}</span></td>                                <td>{{item.name}}</td>                                <td>{{item.amount}}元</td>                                <td>{{item.count}}</td>                            </tr>                            </tbody>                        </table>                    </div>                </div>                <div class="boxall" style="height: 360px">                    <div class="alltitle">卖品销售排行(近七天)</div>                    <div class="navboxall wp" style="overflow: scroll;">                        <table class="table1" width="100%" border="0" cellspacing="0" cellpadding="0">                            <tbody>                            <tr>                                <th scope="col">排名</th>                                <th scope="col">名称</th>                                <th scope="col">金额</th>                                <th scope="col">销售量</th>                            </tr>                            <tr v-for="(item,index) in info.productSortList">                                <td><span>{{index+1}}</span></td>                                <td>{{item.name}}</td>                                <td>{{item.amount}}元</td>                                <td>{{item.count}}</td>                            </tr>                            </tbody>                        </table>                    </div>                </div>            </li>            <li>                <div class="boxall" style="height:120px">                    <div class="navboxall"><h1>舍艺销售可视化展示平台</h1>                        <div style="height: 100px;position: absolute;right: 10px;top:75px;">                            <span style="color: white;"> 门店：</span>                                <el-select  v-model="deptId" placeholder="门店切换">                                    <el-option                                            v-for="item in deptList"                                            :key="item.deptId"                                            :label="item.deptName"                                            :value="item.deptId"                                    >                                    </el-option>                                </el-select>                        </div>                    </div>                </div>                <div class="boxall" style="height:590px">                    <div class="navboxall" style="overflow: hidden;height: 100%">                        <div class="boxall" style="height:590px;">                            <div class="alltitle">七日销售额</div>                            <div class="navboxall " id="echart2" _echarts_instance_="ec_1589508087197"                                 style="-webkit-tap-highlight-color: transparent; user-select: none; position: relative;">                                <div style="position: relative; overflow: hidden; width: 1083px; height: 240px; padding: 0px; margin: 0px; border-width: 0px;">                                    <canvas data-zr-dom-id="zr_0" width="1083" height="240"                                            style="position: absolute; left: 0px; top: 0px; width: 1083px; height: 240px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas>                                </div>                                <div></div>                            </div>                        </div>                    </div>                </div>            </li>            <li>                <div class="boxall" style="height:360px;">                    <div class="alltitle">销售金额</div>                    <div class="navboxall">                        <div class="sycm">                            <ul class="clearfix">                                <li><h2>{{info.year.realAmount}}</h2><span>当年销售额</span></li>                                <li><h2>{{info.month.realAmount}}</h2><span>当月销售额</span></li>                                <li><h2>{{info.year.money}}</h2><span>现金营收</span></li>                                <li><h2>{{info.month.money}}</h2><span>现金营收</span></li>                                <li><h2>{{info.year.count}}</h2><span>销售单数</span></li>                                <li><h2>{{info.month.count}}</h2><span>销售单数</span></li>                            </ul>                        </div>                    </div>                </div>                <div class="boxall" style="height:350px;">                    <div class="alltitle">付款方式占比(近七天)</div>                    <div class="navboxall" id="echart1" _echarts_instance_="ec_1589508087196"                         style="-webkit-tap-highlight-color: transparent; user-select: none; position: relative;">                        <div style="position: relative; overflow: hidden; width: 407px; height: 290px; padding: 0px; margin: 0px; border-width: 0px;">                            <canvas data-zr-dom-id="zr_0" width="407" height="290"                                    style="position: absolute; left: 0px; top: 0px; width: 407px; height: 290px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas>                        </div>                        <div></div>                    </div>                </div>            </li>        </ul>    </div></div><script>    $(function () {    $('.wrap,.adduser').liMarquee({direction: 'up', runshort: false, scrollamount: 20});    });    var vm = new Vue({        el: '#app',        data: {            msg: 'Hello World!',            info: {                year:{                    sellAmount:'',                    realAmount:'',                    count:''                },                month:{                    sellAmount:'',                    realAmount:'',                    count:''                }            },            deptList: [],            deptId: ''        },        methods: {            getfullSell(){                request.fetch("/admin/sell/getfullSell",{deptId:vm.deptId}).then(res=>{                   vm.info = res;                   vm.setPercent(vm.info.percentList);                   console.log(res)                })            },            getSellAmountByDate(){                request.fetch("/admin/sell/getAfewDaySell",{deptId:vm.deptId}).then(res=>{                    var e = echarts.init(document.getElementById("echart2"));                    var g = [res.dateOfMoney];                    var h = res.datelist;                    var i = [ "销售金额"];                    var f = [];                    $.each(g, function (j, l) {                        var k = {name: i[j], type: "bar", itemStyle: {                            normal: {label: {                                    show: true, //开启显示                                    position: 'top', //在上方显示                                }}                            }, barWidth: "30", data: l};                        f.push(k)                    });                    console.log(f)                    option = {                        legend: {data: i, type: "scroll", textStyle: {color: "#fff"}, top: "0"},                        tooltip: {trigger: "axis", axisPointer: {type: "shadow"}},                        color: ["#2f89cf", "#2f89cf"],                        grid: {top: "14%", left: "15", right: "35", bottom: "12%", containLabel: true},                        xAxis: [{                            type: "category",                            axisLabel: {textStyle: {color: "rgba(255,255,255,.6)",}},                            axisLine: {lineStyle: {color: "rgba(255,255,255,.1)"}},                            data: h,                        }],                        yAxis: [{                            name: "",                            type: "value",                            axisTick: {show: false},                            splitLine: {show: true, lineStyle: {color: "#2f2a7a"}},                            axisLabel: {textStyle: {color: "rgba(255,255,255,.6)"}},                            axisLine: {lineStyle: {color: "rgba(255,255,255,.1)"}},                        }],                        series: f                    };                    e.setOption(option);                    window.addEventListener("resize", function () {                        e.resize()                    })                })            },            setPercent(res){                var e = echarts.init(document.getElementById("echart1"));                option = {                    tooltip: {trigger: "item",                        formatter: function (params, ticket, callback) {                            var data = params.data;                            var html  = '占比情况<br/>';                            html += data.amount+'元  ('+data.value+'%)';                            return html;                    }},                    series: [{                        name: "占比情况",                        type: "pie",                        radius: "50%",                        center: ["50%", "50%"],                        clockwise: false,                        data: res,                        label: {normal: {textStyle: {color: "rgba(255,255,255,.6)", fontSize: 14,}}},                        labelLine: {normal: {show: false}},                        itemStyle: {                            normal: {},                            emphasis: {borderWidth: 0, shadowBlur: 10, shadowOffsetX: 0, shadowColor: "rgba(0, 0, 0, 0.5)"}                        }                    }],                    color: ["#62c98d", "#2f89cf", "#4cb9cf"],                };                e.setOption(option);                window.addEventListener("resize", function () {                    e.resize()                })            },            onload(){                vm.getSellAmountByDate();                vm.getfullSell();            }        },        mounted:async function() {            vm = this;            vm.deptList = await api.getDeptList();            vm.deptList.splice(0,0,{deptId:'',deptName:'全部'});            vm.onload();        },        updated: function () {        },        watch:{            deptId:function (newVal) {                vm.onload();            }        }    })</script></body></html>